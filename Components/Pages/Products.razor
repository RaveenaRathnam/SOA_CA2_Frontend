@using SOA_CA2_Frontend.Services;
@inject ApiService ApiService;
@using SOA_CA2_Frontend.Models;

<link href="/css/Products.css" rel="stylesheet" />

<div class="products-container">
    @if (products.Count == 0)
    {
        <p>Loading products...</p>
    }
    else
    {
        foreach (var product in products)
        {
            <div class="product-card">
                <div class="product-image-container">
                    <img src="@product.imageUrl" alt="@product.product_Name" class="product-image" />
                    <div class="overlay-icons">
                        @if (ApiService.IsLoggedIn)
                        {
                            <button class="icon-btn" @onclick="() => AddToCart(product)">
                                🛒
                            </button>
                        }
                        <button class="icon-btn" @onclick="() => QuickView(product)">
                            👁️
                        </button>
                    </div>
                </div>
                <div class="product-details">
                    <h3>@product.product_Name</h3>
                    <p class="price">$@product.price</p>
                </div>
            </div>
        }
    }
</div>

@code {
    private List<ProductModel> products = new();

    protected override async Task OnInitializedAsync()
    {
        products = await ApiService.GetProductsAsync();
    }

    private void AddToCart(ProductModel product)
    {
        // Logic to add product to cart
    }

    private void QuickView(ProductModel product)
    {
        // Logic to display product details in a modal/quick view
    }
}
